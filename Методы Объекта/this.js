// –°–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ –≤ JS –∫–æ—Ç–æ—Ä–æ–µ —Å—Å—ã–ª–∞–µ—Ç—å—Å—è –Ω–∞ –æ–±—ä–µ–∫—Ç, –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –∫–æ—Ç–æ—Ä–æ–≥–æ –±—ã–ª –≤—ã–∑–≤–∞–Ω —Ç–µ–∫—É—â–∏—Ö –∫–æ–¥. –ü–æ —Å—É—Ç–∏, —ç—Ç–æ —Å–ø–æ—Å–æ–± –¥–æ—Å—Ç—É–ø–∞ –∫ —Ç–µ–∫—É—â–µ–º—É –æ–±—ä–µ–∫—Ç—É –∏–∑–Ω—É—Ç—Ä–∏ –µ–≥–æ –º–µ—Ç–æ–¥–æ–≤ –∏–ª–∏ —Ñ—É–Ω–∫—Ü–∏–∏.

// Non-strict mode
console.log(this); // –í—ã–≤–µ–¥–µ—Ç {}
// –í Node.js –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ this —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ –ø—É—Å—Ç–æ–π –æ–±—ä–µ–∫—Ç, –∞ –Ω–µ –Ω–∞ –≥–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç global.

// 'use strict';
console.log(this); // –í—ã–≤–µ–¥–µ—Ç undefined
// –í —Å—Ç—Ä–æ–≥–æ–º —Ä–µ–∂–∏–º–µ –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ this –±—É–¥–µ—Ç undefined.

// –≤ –±—Ä–∞—É–∑–µ—Ä–µ —Ç–∞–∫ –∂–µ –Ω–æ —Ç–∞–º - window

// –°—Ç—Ä–µ–ª–æ—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ –∏–º–µ—é—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è this. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –æ–Ω–∏ –Ω–∞—Å–ª–µ–¥—É—é—Ç this –∏–∑ —Å–≤–æ–µ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è, —Ç–æ –µ—Å—Ç—å –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞, –≤ –∫–æ—Ç–æ—Ä–æ–º –æ–Ω–∏ –±—ã–ª–∏ —Å–æ–∑–¥–∞–Ω—ã.

// Non-strict mode
const arrowFunction = () => {
	console.log(this);
};
arrowFunction(); // –í—ã–≤–µ–¥–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç Node.js (–≤ Node.js ‚Äî global)

// 'use strict';
const arrowFunctionStrict = () => {
	console.log(this);
};
arrowFunctionStrict(); // –í —Å—Ç—Ä–æ–≥–æ–º —Ä–µ–∂–∏–º–µ –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ this –±—É–¥–µ—Ç undefined.

/**
 * –û–±—ã—á–Ω–∞—è function(), —É –Ω–µ—ë –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –µ—Å—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ —Å–∫—Ä—ã—Ç–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ ‚Äî —ç—Ç–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç this.
 * –ù–æ! this ‚Äî —ç—Ç–æ –Ω–µ —è–≤–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä (–µ–≥–æ –Ω–µ—Ç –≤ —Å–ø–∏—Å–∫–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤!), –∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –º–µ—Ö–∞–Ω–∏–∑–º.
 */

/**
 * –¢–≤–æ—è –º–∏–Ω–∏-—à–ø–∞—Ä–≥–∞–ª–∫–∞:
	func.call(obj, ...args) ‚Äî –≤—ã–∑—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –∏ –¥–µ–ª–∞–µ—Ç this === obj –≤–Ω—É—Ç—Ä–∏ –Ω–µ—ë.
	func.apply(obj, [args]) ‚Äî —Ç–æ –∂–µ —Å–∞–º–æ–µ, –Ω–æ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –≤ –º–∞—Å—Å–∏–≤–µ.
	func.bind(obj) ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é, —É –∫–æ—Ç–æ—Ä–æ–π –≤—Å–µ–≥–¥–∞ this === obj.
 */
function sayHi() {
	console.log(this);
}
sayHi(); // this –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–µ–∂–∏–º–∞ –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (window, undefined...)

sayHi.call({ name: 'Anna' }); // this –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –±—É–¥–µ—Ç { name: 'Anna' }
// –¢—ã –≥–æ–≤–æ—Ä–∏—à—å: ‚Äú–í—ã–ø–æ–ª–Ω–∏ —Ñ—É–Ω–∫—Ü–∏—é, –Ω–æ —Å–¥–µ–ª–∞–π —Ç–∞–∫, —á—Ç–æ–±—ã –≤–Ω—É—Ç—Ä–∏ –Ω–µ—ë this –±—ã–ª —Ä–∞–≤–µ–Ω –≤–æ—Ç —ç—Ç–æ–º—É –æ–±—ä–µ–∫—Ç—É!‚Äù

function sayHi(greeting, smile) {
	console.log(greeting, this.name, smile);
}

sayHi.call({ name: 'Anna' }, 'Hello', 'üòä');

/**
 * apply - –¢–æ—á–Ω–æ —Ç–∞–∫ –∂–µ –ø–æ–¥–º–µ–Ω—è–µ—Ç this –∏ –≤—ã–∑—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é —Å—Ä–∞–∑—É,
 * –ù–û –∞—Ä–≥—É–º–µ–Ω—Ç—ã –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –º–∞—Å—Å–∏–≤–æ–º!
 */
sayHi.apply({ name: 'Anna' }, ['Hi', 'ü•≥']);
// –í—ã–≤–µ–¥–µ—Ç: Hi Anna ü•≥

/**
 * bind - –ù–ï –≤—ã–∑—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é —Å—Ä–∞–∑—É!
 * –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ù–û–í–£–Æ —Ñ—É–Ω–∫—Ü–∏—é, —É –∫–æ—Ç–æ—Ä–æ–π this –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç —Ç–æ—Ç, —á—Ç–æ —Ç—ã —É–∫–∞–∑–∞–ª–∞.
 */
const boundHi = sayHi.bind({ name: 'Anna' }, 'Hey', 'üí´');
boundHi(); // –í—ã–≤–µ–¥–µ—Ç: Hey Anna üí´ // –ú–æ–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –∏ –≤—ã–∑—ã–≤–∞—Ç—å –∫–æ–≥–¥–∞ —É–≥–æ–¥–Ω–æ.

// –í–´–ó–û–í –° NEW

/**
		1. –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –≤—ã–∑–æ–≤–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å new?
		–ö–æ–≥–¥–∞ —Ç—ã –ø–∏—à–µ—à—å new RegularFunctionNode(), JavaScript:
		–°–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π –ø—É—Å—Ç–æ–π –æ–±—ä–µ–∫—Ç.
		–í—ã–∑—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é, –≥–¥–µ –≤–Ω—É—Ç—Ä–∏ this —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —ç—Ç–æ—Ç –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç.
		–ï—Å–ª–∏ –Ω–µ—Ç —è–≤–Ω–æ–≥–æ return –æ–±—ä–µ–∫—Ç–∞, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —ç—Ç–æ—Ç –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç.

		2. –ß—Ç–æ –±—É–¥–µ—Ç –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏?
		–í–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ (—Ñ—É–Ω–∫—Ü–∏–∏ —Å new) this ‚Äî —ç—Ç–æ —Ç–æ—Ç —Å–∞–º—ã–π –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç.
		–õ—é–±—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞, –∫–æ—Ç–æ—Ä—ã–µ —Ç—ã –∑–∞–ø–∏—à–µ—à—å —á–µ—Ä–µ–∑ this.something = ..., –±—É–¥—É—Ç –Ω–∞ –Ω–æ–≤–æ–º –æ–±—ä–µ–∫—Ç–µ.
 */
function RegularFunctionNode() {
	this.name = 'Default';
	console.log(this);
}
const instance3 = new RegularFunctionNode();
console.log(instance3);

/**
		3. –ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ?
		* –¢–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç "–∫–ª–∞—Å—Å—ã" –≤ JS –¥–æ –ø–æ—è–≤–ª–µ–Ω–∏—è class-—Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞.
		* –≠—Ç–æ –æ—Å–Ω–æ–≤–∞ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –ø–æ —à–∞–±–ª–æ–Ω—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, new User(), new Car()).

		4. –ö—Ä–∞—Ç–∫–æ –≤ –æ–¥–Ω—É —Ñ—Ä–∞–∑—É:
		–í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ —Å new –≤—Å–µ–≥–¥–∞ —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç, 
		–∞ this –≤–Ω—É—Ç—Ä–∏ —Ç–∞–∫–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —ç—Ç–æ—Ç –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç.
 */

// Dot-notation / –¢–æ—á–µ—á–Ω–∞—è –Ω–æ—Ç–∞—Ü–∏—è
// this –≤ dot-–Ω–æ—Ç–∞—Ü–∏–∏ ‚Äî —ç—Ç–æ –≤—Å–µ–≥–¥–∞ –æ–±—ä–µ–∫—Ç —Å–ª–µ–≤–∞ –æ—Ç —Ç–æ—á–∫–∏!
const user = {
	name: '–ö–∞—Ç—è',
	sayHi: function () {
		console.log(this);
	},
};
user.sayHi(); // this === user

// Dot-notation - –í—ã–∑–æ–≤ —á–µ—Ä–µ–∑ —Ç–æ—á–∫—É ‚Äî this –≤–Ω—É—Ç—Ä–∏ –º–µ—Ç–æ–¥–∞ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –æ–±—ä–µ–∫—Ç —Å–ª–µ–≤–∞ –æ—Ç —Ç–æ—á–∫–∏ (cat).
const cat = {
	name: '–ú—É—Ä–∫–∞',
	sayHi: function () {
		console.log('–ü—Ä–∏–≤–µ—Ç, —è', this.name);
	},
};

cat.sayHi(); // –ü—Ä–∏–≤–µ—Ç, —è –ú—É—Ä–∫–∞
// this === cat

// –ë–µ–∑ dot-–Ω–æ—Ç–∞—Ü–∏–∏ - –í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ –∫–∞–∫ –µ—Å—Ç—å, –±–µ–∑ –æ–±—ä–µ–∫—Ç–∞ —Å–ª–µ–≤–∞ ‚Äî this –Ω–µ —Å–≤—è–∑–∞–Ω –Ω–∏ —Å –∫–∞–∫–∏–º –æ–±—ä–µ–∫—Ç–æ–º.
function whoAmI() {
	console.log(this);
}

whoAmI(); // –í strict mode: undefined. –í –Ω–µ strict: window (–∏–ª–∏ global –≤ Node)

//  –û—Ç–æ—Ä–≤–∞–ª–∏ –º–µ—Ç–æ–¥ –æ—Ç –æ–±—ä–µ–∫—Ç–∞
const dog = {
	name: '–ë–æ–±–∏–∫',
	bark() {
		console.log(this.name);
	},
};

const barkFn = dog.bark; // –ö–æ–ø–∏—Ä—É–µ–º —Å—Å—ã–ª–∫—É –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—é
barkFn(); // undefined (strict) –∏–ª–∏ window (–Ω–µ strict)

// –ü–µ—Ä–µ–¥–∞—á–∞ –º–µ—Ç–æ–¥–∞ –∫–∞–∫ –∫–æ–ª–±—ç–∫
const rabbit = {
	name: '–ö—Ä–æ–ª–∏–∫',
	jump() {
		console.log(this.name);
	},
};

setTimeout(rabbit.jump, 1000); // undefined (strict) –∏–ª–∏ window (–Ω–µ strict)
// –í setTimeout —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–∑–≤–∞–Ω–∞ –±–µ–∑ –æ–±—ä–µ–∫—Ç–∞ —Å–ª–µ–≤–∞ –æ—Ç —Ç–æ—á–∫–∏, –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ—Ç–µ—Ä—è–Ω.

setTimeout(rabbit.jump.bind(rabbit), 1000); // —á–µ—Ä–µ–∑ 1 —Å–µ–∫. –≤—ã–≤–µ–¥–µ—Ç "–ö—Ä–æ–ª–∏–∫"
// rabbit.jump.bind(rabbit) ‚Äî —Å–æ–∑–¥–∞—ë—Ç —Ñ—É–Ω–∫—Ü–∏—é, –≥–¥–µ this –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç —Ä–∞–≤–µ–Ω rabbit.

setTimeout(() => rabbit.jump(), 1000); // –¢—É—Ç –º—ã —è–≤–Ω–æ –≤—ã–∑—ã–≤–∞–µ–º rabbit.jump() —Å –Ω—É–∂–Ω—ã–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º.
// –°—Ç—Ä–µ–ª–æ—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –Ω–µ –∏–º–µ–µ—Ç —Å–≤–æ–µ–≥–æ this –∏ "–∑–∞—Ö–≤–∞—Ç–∏—Ç" –≤–Ω–µ—à–Ω–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç.
